<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.cn668.dao.UserDao">

	<resultMap type="cn.cn668.pojo.User" id="userMap">
		<id property="id" column="id"/>
		<result property="userName" column="userName" />
		<result property="password" column="password" />
		<result property="dt" column="dt" />
		<result property="mail" column="mail" />
		<result property="headPortrait" column="headPortrait" />
		<result property="roleId" column="roleId" />
		<association  property="role" javaType="cn.cn668.pojo.Role">
			<result column="roleName" property="roleName" />
		</association>
	</resultMap>

    <select id="findUser" resultMap="userMap">
        select u.id,u.userName,u.`password`,u.mail,u.headPortrait,u.dt,u.roleId,o.roleName from user u
join role o on u.roleId = o.id where u.userName = #{userName}
    </select>
    
    <select id="findUserList" resultMap="userMap">
        select u.id,u.userName,u.`password`,u.mail,u.headPortrait,u.dt,u.roleId,o.roleName from user u
join role o on u.roleId = o.id
    </select>
 
</mapper>